!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).TypeIt=t()}(this,function(){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(t)}function t(n){this.insert=function(n,e){t.splice(n,0,e)},this.add=function(n,r,i){return n=h(n)?n:[n,null],i=i||!1,r=r||1,h(n[0])||(n=m(r,n)),n=d(n).map(function(n){return n[2]=p(n[2],{id:e}),e++,n}),t=i?n.concat(t):t.concat(n),this},this.set=function(n,e){t[n]=e},this.reset=function(){t=t.map(function(n){return n[2].executed=!1,n})},this.getItems=function(){return(t=d(t)).filter(function(n){return!n[2].executed})},this.setMeta=function(n,e){var r=t.findIndex(function(t){return t[2].id===n});t[r][2]=p(t[r][2],e)};var t=[],e=0;this.add(n)}function e(n){var t,e=S(n);return t=N(e).map(function(n){return n.nodeValue?g(n.nodeValue).map(function(t){return L(t,n)}):L(n)}),b(t)}function r(n,t){return(t=void 0===t||t)?e(n):g(n).map(function(n){return L(n)})}function i(n,t,e){return e?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}function o(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return Promise.resolve(n.apply(this,t))}catch(n){return Promise.reject(n)}}}function u(){}function c(n,t){if(!t)return n&&n.then?n.then(u):Promise.resolve()}function a(n,t){var e=n();return e&&e.then?e.then(t):t(e)}function f(n,t,e){if(!n.s){if(e instanceof P){if(!e.s)return void(e.o=f.bind(null,n,t));1&t&&(t=e.s),e=e.v}if(e&&e.then)return void e.then(f.bind(null,n,t),f.bind(null,n,2));n.s=t,n.v=e;var r=n.o;r&&r(n)}}function s(n,t){return n&&n.then?n.then(t):t(n)}var l={strings:[],speed:100,cursor:!0,cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,lifeLike:!0,breakLines:!0,startDelay:250,startDelete:!1,nextStringDelay:750,loop:!1,loopDelay:750,html:!0,waitUntilVisible:!1,beforeString:function(){},afterString:function(){},beforeStep:function(){},afterStep:function(){},afterComplete:function(){}},d=function(n){return n.map(function(n){return void 0===n[1]&&n.push(null),void 0===n[2]&&n.push({}),n})},p=function(n,t){return Object.assign({},n,t)},h=function(n){return Array.isArray(n)},v=function(n,t){return n[2]=p(n[2],t)||t,n},y=function(n,t){return h(n[0])?n.map(function(n){return v(n,t)}):v(n,t)},m=function(n,t,e,r){r=r||!1,e=e||{};var i=!h(n),o=n.length;return(n=i?new Array(n).fill(0):n).map(function(n,u){if(i)return t;var c=[t,n,e];return r&&(0===u&&(c=y(c,{isFirst:!0})),u+1===o&&(c=y(c,{isLast:!0}))),c})},g=function(n){return Array.from(n)},b=function(n){var t=[];return t.concat.apply(t,n)},S=function(n){var t=document.implementation.createHTMLDocument("");return t.body.innerHTML=n,t.body},N=function n(t,e,r){e=e||null,r=void 0!==r&&r;var i=g(t.childNodes).map(function(t){return 3===(e=t).nodeType||"BR"===e.tagName?t:n(t);var e});return i=b(i),e&&(i=i.filter(function(n){return!e.contains(n)})),r?i.reverse():i},T=function(n){return"BODY"===n.tagName},L=function(n,t){t=t||null;var e=n instanceof HTMLElement;return{node:t,isTopLevelText:(!t||T(t.parentNode))&&!e,isHTMLElement:e,content:n}},M=function(n){return document.createElement(n)},x=function(n,t){var e=M("style");e.id=t||"",e.appendChild(document.createTextNode(n)),document.head.appendChild(e)},w=function(n){return h(n)||(n=[n/2,n/2]),{before:n[0],after:n[1],total:n[0]+n[1]}},D=function(n,t){return Math.abs(Math.random()*(n+t-(n-t))+(n-t))},H=function(n){return["textarea","input"].indexOf(n.tagName.toLowerCase())>-1},E=function(n,t){var e=t.querySelectorAll("*");return[t].concat(g(e).reverse()).find(function(t){return t.cloneNode().outerHTML===n.outerHTML})},C=function(n,t,e,r){e=e||null;var i=t.isHTMLElement,o=i?t.content:document.createTextNode(t.content);if(H(n))n.value="".concat(n.value).concat(t.content);else{if(!t.isTopLevelText&&!i){var u=t.node.parentNode,c=E(u.cloneNode(),n);if(function(n,t){if(!n)return!1;var e=n.nextSibling;return!e||e.isEqualNode(t)}(c,e))n=c;else if((o=u.cloneNode()).innerText=t.content,!T(u.parentNode)){for(var a=u.parentNode,f=a.cloneNode(),s=E(f,n);!s&&!T(a);)f.innerHTML=o.outerHTML,o=f,f=a.parentNode.cloneNode(),a=a.parentNode,s=E(f,n);n=s||n}}var l=N(n,e,!0)[r-1],d=l?l.parentNode:n;d.insertBefore(o,d.contains(e)?e:null)}},A=function(n){var t;return null==n||null===(t=n.parentNode)||void 0===t?void 0:t.removeChild(n)},k=function(n,t,e){var r,i="string"==typeof n,o=!1,u=-1*n;return i&&(u=(r="END"===n.toUpperCase())?-1:1,o=r?t+u>0:t+u<e.length),{isString:i,numberOfSteps:u,canKeepMoving:o}},O=function(n){var t,e=["font","lineHeight","color"],r=M("SPAN"),i=(t=n,window.getComputedStyle(t,null));for(var o in i)e.indexOf(o)>-1&&i[o]&&(r.style[o]=i[o]);return r.style.cssText},P=function(){function n(){}return n.prototype.then=function(t,e){var r=new n,i=this.s;if(i){var o=1&i?t:e;if(o){try{f(r,1,o(this.v))}catch(n){f(r,2,n)}return r}return this}return this.o=function(n){try{var i=n.v;1&n.s?f(r,1,t?t(i):i):e?f(r,1,e(i)):f(r,2,i)}catch(n){f(r,2,n)}},r},n}();return function(d,v){var y=this,b=this;v=v||{};var T=function(n,t,e){return n=h(n[0])?n:[n],an.add(n,t),function(n){var t=(n=n||{}).delay;t&&an.add([U,t])}(e),b},E=function(t){return t="object"===n(t)?t:{},[[Q,t,{force:!0}],[Q,en,{force:!0}]]},z=function(){return X?g(W.value):N(W,fn,!0)},B=function(n,t){t=t||1;var e=en.nextStringDelay;an.insert(n,[U,e.before]),an.insert(n+t+1,[U,e.after])},I=o(function(){if(fn){var n="[data-typeit-id='".concat(cn,"'] .ti-cursor");x("@keyframes blink-".concat(cn," { 0% {opacity: 0} 49% {opacity: 0} 50% {opacity: 1} } ").concat(n," { animation: blink-").concat(cn," ").concat(en.cursorSpeed/1e3,"s infinite; } ").concat(n,".with-delay { animation-delay: 500ms; } ").concat(n,".disabled { animation: none; }"),cn),W.appendChild(fn);var t="loaded"===document.fonts.status;return i(t||document.fonts.ready,function(n){var t=fn.getBoundingClientRect().width/2;fn.style.margin="0 -".concat(t+2,"px 0 -").concat(t-2,"px")},t)}}),R=function(n){fn&&(fn.classList.toggle("disabled",n),fn.classList.toggle("with-delay",!n))},q=o(function(n,t){return $.push(setTimeout(n,t)),i()}),j=o(function(n){var t=_;return i(t&&F(_),function(t){return an.reset(),an.set(0,[U,n.before]),c(G(!0))},!t)}),V=o(function(){tn.started=!0;var n,t=an.getItems();return s(function(n,t){try{var e=n()}catch(n){return t(n)}return e&&e.then?e.then(void 0,t):e}(function(){return s(function(n,t,e){var r,i,o=-1;return function u(c){try{for(;++o<n.length&&(!e||!e());)if((c=t(o))&&c.then){if(!((a=c)instanceof P&&1&a.s))return void c.then(u,i||(i=f.bind(null,r=new P,2)));c=c.v}r?f(r,1,c):r=c}catch(n){f(r||(r=new P),2,n)}var a}(),r}(t,function(e){if(tn.frozen||tn.destroyed)throw"";var r,o,u,f,s=t[e],l=s[2];return n=[s,y],l.freezeCursor&&R(!0),r=en.speed,o=en.deleteSpeed,u=en.lifeLike,f=(o=null!==o?o:r/3)/2,Z=u?[D(r,r/2),D(o,f)]:[r,o],a(function(){var t;if(null==l?void 0:l.isFirst)return c((t=en).beforeString.apply(t,n))},function(){var t;return i((t=en).beforeStep.apply(t,n),function(){return i(s[0].call(y,s[1],l),function(){return a(function(){var t,e;if(null===(t=s[2])||void 0===t?void 0:t.isLast)return c((e=en).afterString.apply(e,n))},function(){var t;return i((t=en).afterStep.apply(t,n),function(){an.setMeta(l.id,{executed:!0}),R(!1)})})})})})},function(){return!1}),function(t){var e;return tn.completed=!0,i((e=en).afterComplete.apply(e,n),function(){if(!en.loop)throw"";var n=en.loopDelay;q(function(){return i(j(n),function(){V()})},n.after)})})},u),function(n){return y})}),U=function(n){return new Promise(function(t){q(function(){return t()},n||0)})},F=function n(t){var e=z(),r=k(t,_,e);return _+=r.numberOfSteps,new Promise(function(t){q(o(function(){return function(n,t,e,r){if(e){var i=r,o=t[(i=i>t.length?t.length:i)-1];(n=o?o.parentNode:n).insertBefore(e,o||null)}}(W,z(),fn,_),a(function(){if(r.isString&&r.canKeepMoving)return c(n(r.numberOfSteps>0?"START":"END"))},function(){return t()})}),Z[0])})},K=function(n){return new Promise(function(t){q(function(){return C(W,n,fn,_),t()},Z[0])})},Q=o(function(n){en=p(en,n)}),Y=o(function(){X?W.value="":z().forEach(function(n){A(n)})}),G=function n(t){return t=!0===t,new Promise(function(e){q(o(function(){var r=!1,o=z();return o.length&&(X?W.value=W.value.slice(0,-1):A(o[_])),g(W.querySelectorAll("*")).forEach(function(n){if(!n.innerHTML&&"BR"!==n.tagName){for(var t=n;1===t.parentNode.childNodes.length&&t.parentNode.childNodes[0].isEqualNode(t);)t=t.parentNode;A(t)}}),a(function(){if(t&&o.length-1>0)return i(n(!0),function(){return r=!0,e()})},function(n){return r?n:e()})}),Z[1])})};this.break=function(n){return T([K,L(M("BR"))],1,n)},this.delete=function(n,t){var e=E(t);return T([e[0]].concat([].concat(Array(Math.abs(n)||1)).fill().map(function(){return[G,!n,nn]}),[e[1]]),1,t)},this.empty=function(){return T(Y,1,arguments)},this.exec=function(n,t){var e=E(t);return T([e[0],[n,null],e[1]],1,t)},this.move=function(n,t){var e=k(n,_,z()),r=E(t),i=e.isString?n:Math.sign(n);return T([r[0]].concat([].concat(Array(Math.abs(n)||1)).fill().map(function(){return[F,i,nn]}),[r[1]]),1,t)},this.options=function(n){return T([Q,n],1,n)},this.pause=function(n,t){return T([U,n],1,t)},this.type=function(n,t){var e=E(t),i=r(n,en.html),o=[e[0]].concat(m(i,K,nn,!0),[e[1]]);return T(o,1,t)},this.is=function(n){return tn[n]},this.destroy=function(n){n=void 0===n||n,$.forEach(function(n){clearTimeout(n)}),$=[],n&&A(fn),tn.destroyed=!0},this.freeze=function(){tn.frozen=!0},this.unfreeze=function(){tn.frozen=!1,V()},this.reset=function(){for(var n in!this.is("destroyed")&&this.destroy(),an.reset(),_=0,tn)tn[n]=!1;return X?W.value="":W.innerHTML="",this},this.go=function(){return tn.started?this:(I(),en.waitUntilVisible?(n=W,t=V.bind(this),new IntersectionObserver(function(e,r){e.forEach(function(e){e.isIntersecting&&(t(),r.unobserve(n))})},{threshold:1}).observe(n),this):(V(),this));var n,t},this.getQueue=function(){return an},this.getOptions=function(){return en},this.getElement=function(){return W};var J,W="string"==typeof(J=d)?document.querySelector(J):J,X=H(W),Z=[],$=[],_=0,nn={freezeCursor:!0},tn={started:!1,completed:!1,frozen:!1,destroyed:!1},en=p(l,v);en=p(en,{html:!X&&en.html,nextStringDelay:w(en.nextStringDelay),loopDelay:w(en.loopDelay)});var rn,on,un,cn=Math.random().toString().substring(2,9),an=new t([U,en.startDelay]);W.setAttribute("data-typeit-id",cn),x("[data-typeit-id]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}[data-typeit-id]"),en.strings=(un=en.strings,rn=h(un)?un:[un],(on=function(n){return n.innerHTML.replace(/<\!--.*?-->/g,"").trim()}(W))?(W.innerHTML="",en.startDelete?(e(on).forEach(function(n){C(W,n,fn,_)}),an.add([G,!0]),B(1),rn):[on.trim()].concat(rn)):rn);var fn=function(){if(X||!en.cursor)return null;var n=M("span");return n.innerHTML=S(en.cursorChar).innerHTML,n.className="ti-cursor",n.style.cssText="display:inline;".concat(O(W)),n}();en.strings.length&&function(){var n=en.strings.filter(function(n){return!!n});n.forEach(function(t,e){var i=r(t,en.html);an.add(m(i,K,nn,!0));var o=an.getItems().length;if(e+1!==n.length){if(en.breakLines){var u=L(M("BR"));return an.add([K,u,nn]),void B(o)}an.add(m(i,G,nn)),B(o,t.length)}})}()}});